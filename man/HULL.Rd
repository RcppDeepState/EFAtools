% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/HULL.R
\name{HULL}
\alias{HULL}
\title{Hull method for determining the number of factors to retain}
\source{
Lorenzo-Seva, U., Timmerman, M. E., & Kiers, H. A. (2011).
The Hull method for selecting the number of common factors. Multivariate
behavioral research, 46(2), 340-364.
}
\usage{
HULL(
  x,
  N = NA,
  n_fac_theor = NA,
  method = c("PAF", "ULS", "ML"),
  gof = c("CAF", "CFI", "RMSEA"),
  eigen_type = c("SMC", "PCA", "EFA"),
  use = c("pairwise.complete.obs", "all.obs", "complete.obs", "everything",
    "na.or.complete"),
  ...
)
}
\arguments{
\item{x}{matrix or data.frame. Correlation matrix or raw data.}

\item{N}{numeric. Number of cases in the data. This is passed to \link{PARALLEL}.
Only has to be specified if x is a correlation matrix.}

\item{n_fac_theor}{numeric. Theoretical number of factors to retain. The maximum
of this number and the number of factors suggested by \link{PARALLEL} plus
one will be used in the Hull method.}

\item{method}{character. The estimation method to use. One of  \code{"PAF"},
\code{"ULS"}, or  \code{"ML"}, for principal axis factoring, unweighted
least squares, and maximum likelihood, respectively.}

\item{gof}{character. The goodness of fit index to use. Either \code{"CAF"},
\code{"CFI"}, or \code{"RMSEA"}, or some combination of them.
If \code{method = "PAF"} is used, only
the CAF can be used as goodness of fit index. For details on the CAF, see
Lorenzo-Seva, Timmerman, and Kiers (2011).}

\item{eigen_type}{character. On what the eigenvalues should be found. Can be
one of "SMC", "PCA", or "EFA". If using "SMC" (default), the diagonal of the
correlation matrices is replaced by the squared multiple correlations (SMCs)
of the indicators. If using "PCA", the diagonal values of the correlation
matrices are left to be 1. If using "EFA", eigenvalues are found on the
correlation  matrices with the final communalities of an EFA solution as
diagonal. This is passed to  \code{\link[PARALLEL]{PARALLEL}}.}

\item{use}{character. Passed to \code{\link[stats:cor]{stats::cor}} if raw data
is given as input. Default is "pairwise.complete.obs".}

\item{...}{Further arguments passed to \link{EFA} or \link{PARALLEL}.}
}
\value{
A list of class HULL containing the following objects
\item{n_fac_CAF}{The number of factors to retain according to the Hull method
with the CAF.}
\item{n_fac_CFI}{The number of factors to retain according to the Hull method
with the CFI.}
\item{n_fac_RMSEA}{The number of factors to retain according to the Hull method
with the RMSEA.}
\item{solutions_CAF}{A matrix containing the CAFs, degrees of freedom, and for the factors lying on the hull, the st values of the hull solution (see Lorenzo-Seva, Timmerman, and Kiers 2011 for details).}
#' \item{solutions_CFI}{A matrix containing the CFIs, degrees of freedom, and for the factors lying on the hull, the st values of the hull solution (see Lorenzo-Seva, Timmerman, and Kiers 2011 for details).}
#' \item{solutions_RMSEA}{A matrix containing the RMSEAs, degrees of freedom, and for the factors lying on the hull, the st values of the hull solution (see Lorenzo-Seva, Timmerman, and Kiers 2011 for details).}
\item{settings}{A list of the settings used.}
}
\description{
Implementation of the Hull method suggested by Lorenzo-Seva, Timmerman,
and Kiers (2011), but using principal axis factoring. See details for
parallelization.
}
\details{
The \link{PARALLEL} function and the principal axis factoring of the
  different number of factors can be parallelized using the future framework,
  by calling the \link{future}{plan} function. The examples provide example code
  on how to enable parallel processing.

  Note that if \code{gof = "RMSEA"} is used, 1 - RMSEA is actually used to
  compare the different solutions. Thus, the threshold of .05 is now .95.

  The ML estimation method uses the \link{stats}{factanal} starting values. See
  also the \link{ML} documentation.
}
\examples{
\dontrun{
# using PAF (this will throw a warning if gof is not specified manually
# and CAF will be used automatically)
HULL(test_models$baseline$cormat, N = 500, gof = "CAF")

# using ML with all available fit indices (CAF, CFI, and RMSEA)
HULL(test_models$baseline$cormat, N = 500, method = "ML")

# using ULS with only RMSEA
HULL(test_models$baseline$cormat, N = 500, method = "ULS", gof = "RMSEA")

# using parallel processing (Note: plans can be adapted, see the future
# package for details)
future::plan(future::multisession)
HULL(test_models$baseline$cormat, N = 500, gof = "CAF")
}
}
