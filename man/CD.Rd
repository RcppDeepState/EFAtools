% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CD.R
\name{CD}
\alias{CD}
\title{Comparison Data}
\source{
Auerswald, M., & Moshagen, M. (2019). How to determine the number of
factors to retain in exploratory factor analysis: A comparison of extraction
methods under realistic conditions. Psychological Methods, 24(4), 468–491.
https://doi.org/10.1037/met0000200

Ruscio, J., & Roche, B. (2012). Determining the number of factors to
retain in an exploratory factor analysis using comparison data of known
factorial structure. Psychological Assessment, 24, 282–292.
doi: 10.1037/a0025697
}
\usage{
CD(
  x,
  n_factors_max = NA,
  N_pop = 10000,
  N_samples = 500,
  alpha = 0.3,
  use = c("pairwise.complete.obs", "all.obs", "complete.obs", "everything",
    "na.or.complete"),
  cor_method = c("pearson", "spearman", "kendall"),
  max_iter = 50
)
}
\arguments{
\item{x}{data.frame or matrix. Dataframe or matrix of raw data.}

\item{n_factors_max}{numeric. The maximum number of factors to test against.
Larger numbers will increase the duration the procedure takes, but test more
possible solutions. Maximum possible is number of variables / 2. Default is
NA. If not specified, number of variables / 2 is used.}

\item{N_pop}{numeric. Size of finite populations of comparison data. Default
is 10000.}

\item{N_samples}{numeric. Number of samples drawn from each population.
Default is 500.}

\item{alpha}{numeric. The alpha level used to test the significance of the
improvement added by an additional factor. Default is .30.}

\item{use}{character. Passed to \code{\link[stats:cor]{stats::cor}}. Default
is "pairwise.complete.obs".}

\item{cor_method}{character. Passed to \code{\link[stats:cor]{stats::cor}}.
Default is "pearson".}

\item{max_iter}{numeric. The maximum number of iterations to perform after
 which the iterative PAF procedure is halted. Default is 50.

 @details BLABLA (DETAILS HERE)

 The \code{CD} function can also be called together with other factor retention
 criteria in the \code{\link[N_FACTORS]{N_FACTORS}} function.}
}
\value{
A list of class CD containing

\item{n_factors}{The number of factors to retain according to the empirical Kaiser criterion.}
\item{eigenvalues}{A vector containing the eigenvalues of the entered data.}
\item{RMSE_eigenvalues}{A matrix containing the RMSEs between the eigenvalues of the generated data and those of the entered data.}
\item{settings}{A list with the settings used.}
}
\description{
Factor retention method introduced by Ruscio and Roche (2012). The code was
adapted from the CD code by Auerswald and Mooshagen (2017) available at
https://osf.io/x5cz2/?view_only=d03efba1fd0f4c849a87db82e6705668
}
\examples{
\dontrun{

# extract the loadings
L <- population_models$loadings$baseline
n_factors <- ncol(L)

# extract the intercorrelations
phi <- population_models$phis_3$strong

# set up vectors with means and sds
mus <- rep(0, nrow(L))
sds <- rep(1, nrow(L))

# get correlation matrix from loadings and factor intercorrelations
cormat <- L \%*\% phi \%*\% t(L)
diag(cormat) <- 1

# create covariance matrix for multivariate distribution
covmat <- sds \%*\% t(sds) * cormat
# simulate data
sim_dat <- MASS::mvrnorm(mu = mus, Sigma = covmat)

# run comparison data
CD(sim_dat, 8)
}
}
\seealso{
Other factor retention criteria: \code{\link[EKC]{EKC}},
 \code{\link[HULL]{HULL}}, \code{\link[KGC]{KGC}},
  \code{\link[PARALLEL]{PARALLEL}}, \code{\link[SMT]{SMT}}

  \code{\link[N_FACTORS]{N_FACTORS}} as a wrapper function for this and all
  the above-mentioned factor retention criteria.
}
