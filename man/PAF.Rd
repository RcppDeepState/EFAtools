% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PAF.R
\name{PAF}
\alias{PAF}
\title{Principal Axis Factoring}
\source{
Grieder, S., & Steiner, M.D.(2019). Algorithmic Jingle Jungle: Comparison of Implementations of an EFA Procedure in R psych Versus SPSS, MacOrtho, and Omega. Submitted Manuscript.
}
\usage{
PAF(
  x,
  n_factors,
  cors = TRUE,
  N = NA,
  max_iter = NULL,
  type = "GS",
  init_comm = NULL,
  criterion = NULL,
  criterion_type = NULL,
  abs_eigen = NULL,
  signed_loadings = TRUE,
  use = "pairwise.complete.obs",
  use_cpp = NULL
)
}
\arguments{
\item{x}{data.frame or matrix. Dataframe or matrix of raw data or matrix with
correlations.}

\item{n_factors}{numeric. Number of factors to extract.}

\item{cors}{logical. If \code{TRUE} (default) a correlation matrix is expected in x,
otherwise raw data is expected.}

\item{N}{numeric. The number of observations. Needs only be specified if a
correlation matrix is used. If input is a correlation matrix and N = NA
(default), not all fit indices can be computed. See
\code{\link[psych:factor.stats]{psych::factor.stats}} for details.}

\item{max_iter}{numeric. The maximum number of iterations to
perform after which the iterative PAF procedure is halted with a warning.
Default is \code{NULL}.}

\item{type}{character. If one of "GS" (default), "psych", or "SPSS" is
used, and the following arguments (except \code{signed_loadings}) are left with
NULL, these implementations
are executed as reported in Gieder and Steiner (2019; see details).
Individual properties can be adapted using one of the three types and
specifying some of the following
arguments. If set to another value than one of the three specified above, all
arguments with default \code{NULL} must be specified.}

\item{init_comm}{character. The method to estimate the initial communalities.
"smc" will use squared multiple correlations. "mac" will use
 maximum absolute correlations. "unity" will use 1s. Default is \code{NULL}.}

\item{criterion}{numeric. The convergence criterion.
If the change in communalities from one iteration to the next is smaller than
this criterion the solution is accepted and the procedure ends. Details
depend on criterion_type. Default is \code{NULL}.}

\item{criterion_type}{character. "max_individual" selects the
maximum change in any of the communalities from one iteration to the next
and tests it against the specified criterion. This is also used by SPSS.
"sums" takes difference of the sum of all communalities in one iteration and
the sum of all communalities in the next iteration and tests it against the
criterion. This procedure is used by the \code{\link[psych:fa]{psych::fa}} function.
Default is \code{NULL}.}

\item{abs_eigen}{logical. Which algorithm to use in the PAF iterations. If
FALSE, the loadings are computed from the eigenvalues. This is
also used by the \code{\link[psych:fa]{psych::fa}} function. If TRUE the
loadings are computed
with the absolute eigenvalues as done by SPSS. Default is \code{NULL}.}

\item{signed_loadings}{logical. If \code{TRUE} (default), the sign of
factors with negative sum of loadings is reflected. This is done by both
SPSS and \code{\link[psych:fa]{psych::fa}}.}

\item{use}{character. Passed to \code{\link[stats:cor]{stats::cor}} if raw data
is given as input. Note that in this case \code{cors} must be set to
\code{FALSE}. Default is "pairwise.complete.obs".}

\item{use_cpp}{logical. If \code{TRUE}, the iterative PAF procedure to find the
factor solution is performed using Rcpp. This is faster, but can lead to some
very small differences in the output. Default is \code{NULL}.}
}
\value{
A list of class PAF containing the following
\item{orig_R}{Original correlation matrix.}
\item{h2_init}{Initial communality estimates.}
\item{h2}{Final communality estimates.}
\item{iter}{The number of iterations needed for convergence.}
\item{orig_eigen}{Eigen values of the original correlation matrix.}
\item{init_eigen}{Initial eigenvalues, obtained from the correlation matrix
 with the initial communality estimates as diagonal.}
\item{final_eigen}{Eigenvalues of the final iteration.}
\item{unrot_loadings}{Loading matrix containing the final loadings.}
\item{vars_accounted}{Matrix of explained variances and sums of squared loadings}
\item{fit_indices}{Fit indices as returned by
 \code{\link[psych:factor.stats]{psych::factor.stats}}}
\item{settings}{list. The settings (arguments) used in the PAF.}
}
\description{
This function implements the principal axis factoring procedure. It can
reproduce the results from \code{\link[psych:fa]{psych::fa}} and the SPSS
FACTOR algorithm. To reproduce psych or SPSS PAF, only the type argument has
to be specified in addition to the data and number of factors. The other
arguments can be used to control the procedure more flexibly by overriding
the default settings. If type = "none" is specified, all arguments with default
\code{NULL} have to be specified.
}
\details{
Values of \code{init_comm}, \code{criterion}, \code{criterion_type},
\code{abs_eigen}, and \code{use_cpp} depend on the \code{type} argument.
\code{type = "GS"} will use the following argument specification:
\code{init_comm = "smc", criterion = 1e-9, criterion_type = "max_individual",
abs_eigen = FALSE, use_cpp = TRUE}.
\code{type = "psych"} will use the following argument specification:
\code{init_comm = "smc", criterion = .001, criterion_type = "sums",
abs_eigen = FALSE, use_cpp = FALSE}.
\code{type = "SPSS"} will use the following argument specification:
\code{init_comm = "smc", criterion = .001, criterion_type = "max_individual",
abs_eigen = TRUE, use_cpp = FALSE}.
}
\examples{
# call within EFA function:
EFA(IDS2_R, n_factors = 5, type = "GS")

# call as single function
PAF(IDS2_R, n_factors = 5, type = "GS")
}
